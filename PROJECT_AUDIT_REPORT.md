# üîç –ü–û–õ–ù–´–ô –ê–£–î–ò–¢ –ü–†–û–ï–ö–¢–ê ‚Äî –°–∏—Å—Ç–µ–º–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –§–û–¢
### –î–∞—Ç–∞: 15 –§–µ–≤—Ä–∞–ª—è 2026
### –í–µ—Ä—Å–∏—è: 0.1.0 (MVP)

---

## üìä –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –°—Ç–∞—Ç—É—Å |
|-----------|--------|--------|
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | 7/10 | üü° –•–æ—Ä–æ—à–∞—è –æ—Å–Ω–æ–≤–∞, —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | 3/10 | üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã** |
| –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ | 6/10 | üü° –°—Ä–µ–¥–Ω–µ |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 6/10 | üü° –ë–∞–∑–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –µ—Å—Ç—å |
| Production-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | 3/10 | üî¥ **–ù–ï –≥–æ—Ç–æ–≤** |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 6/10 | üü° –ê–¥–µ–∫–≤–∞—Ç–Ω–æ –¥–ª—è MVP |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 4/10 | üü° –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è |
| DevOps/CI/CD | 2/10 | üî¥ –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç |

### –í–ï–†–î–ò–ö–¢: üî¥ –ü—Ä–æ–µ–∫—Ç –ù–ï –ì–û–¢–û–í –¥–ª—è production. –¢—Ä–µ–±—É–µ—Ç—Å—è ~2-4 –Ω–µ–¥–µ–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è.

---

## 1. üèó –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (7/10)

### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ:
- ‚úÖ **–ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ Backend/Frontend** ‚Äî FastAPI + Vite/React
- ‚úÖ **Service-layer –ø–∞—Ç—Ç–µ—Ä–Ω** ‚Äî `AuthService`, `EmployeeService`, `salary_service` –≤—ã–Ω–µ—Å–µ–Ω—ã –∏–∑ —Ä–æ—É—Ç–µ—Ä–æ–≤
- ‚úÖ **–ú–æ–¥—É–ª—å–Ω—ã–µ —Ä–æ—É—Ç–µ—Ä—ã** ‚Äî 14 —Ä–æ—É—Ç–µ—Ä–æ–≤ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏ (`/api/auth`, `/api/employees`, etc.)
- ‚úÖ **Dependency Injection** ‚Äî `Depends(get_db)`, `Depends(get_current_active_user)` –≤–æ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
- ‚úÖ **Permission System** ‚Äî `PermissionChecker`, `require_admin`, scope-based filtering
- ‚úÖ **Audit Trail** ‚Äî `AuditLog` –º–æ–¥–µ–ª—å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ **Frontend** ‚Äî React Query –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, Router v7, Error Boundary

### –ü—Ä–æ–±–ª–µ–º—ã:

#### ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- **–ù–µ—Ç –µ–¥–∏–Ω–æ–π —Å—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–æ–≤** ‚Äî –æ–¥–Ω–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `{"status": "ok", "id": ...}`, –¥—Ä—É–≥–∏–µ ‚Äî `{"status": "success"}`, —Ç—Ä–µ—Ç—å–∏ ‚Äî –ø—Ä—è–º–æ–π –æ–±—ä–µ–∫—Ç. –ù–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞.
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** ‚Äî `verify_password` –∏ `get_password_hash` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ 3 –º–µ—Å—Ç–∞—Ö: `security.py`, `routers/users.py`, `services/auth_service.py`
- **–ù–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–π –ë–î** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Base.metadata.create_all()`. –í –ø—Ä–æ–¥–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ schema —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è.
- **SQLite –≤ –ø—Ä–æ–¥–µ** ‚Äî –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è, –Ω–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π, —Ñ–∞–π–ª–æ–≤–∞—è –ë–î.
- **–ù–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤** ‚Äî `dev` vs `prod` vs `test` –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

#### ‚ÑπÔ∏è –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
- `salary_service.py` (–≤ services) –∏ `salary_config.py` (–≤ routers) –æ–±–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–≤–æ–π `calculate_taxes` ‚Äî –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á—ë—Ç–æ–≤.
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç background job queue (Celery/ARQ) ‚Äî `BackgroundTasks` –∏–∑ FastAPI –Ω–µ –Ω–∞–¥—ë–∂–µ–Ω –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –∑–∞–¥–∞—á.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```
backend/
‚îú‚îÄ‚îÄ main.py           ‚Üê –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ security.py       ‚Üê JWT + bcrypt
‚îú‚îÄ‚îÄ dependencies.py   ‚Üê Auth middleware, PermissionChecker
‚îú‚îÄ‚îÄ schemas.py        ‚Üê Pydantic –º–æ–¥–µ–ª–∏ (–≤—Å–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ!)
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ database.py   ‚Üê SQLAlchemy engine
‚îÇ   ‚îî‚îÄ‚îÄ models.py     ‚Üê 15 ORM –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ services/         ‚Üê Business logic
‚îÇ   ‚îú‚îÄ‚îÄ auth_service.py
‚îÇ   ‚îú‚îÄ‚îÄ employee_service.py
‚îÇ   ‚îî‚îÄ‚îÄ salary_service.py
‚îú‚îÄ‚îÄ routers/          ‚Üê 14 API —Ä–æ—É—Ç–µ—Ä–æ–≤
‚îî‚îÄ‚îÄ tests/            ‚Üê 10 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx       ‚Üê –†–æ—É—Ç–∏–Ω–≥, Protected Routes
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx      ‚Üê Entry + Error Boundary
‚îÇ   ‚îú‚îÄ‚îÄ lib/api.ts    ‚Üê Axios instance
‚îÇ   ‚îú‚îÄ‚îÄ components/   ‚Üê 35+ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ hooks/        ‚Üê React Query —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ pages/        ‚Üê –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îî‚îÄ‚îÄ context/      ‚Üê SnapshotContext
```

---

## 2. üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ (3/10) ‚Äî –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ï–ö–¶–ò–Ø

### üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –£–Ø–ó–í–ò–ú–û–°–¢–ò:

#### 1. HARDCODED SECRET KEY
```python
# security.py:7
SECRET_KEY = "CHANGE_THIS_TO_A_VERY_STRONG_SECRET_KEY_IN_PRODUCTION"
```
**–†–∏—Å–∫:** –õ—é–±–æ–π, –∫—Ç–æ –≤–∏–¥–∏—Ç –∫–æ–¥, –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ–ª–∞—Ç—å JWT —Ç–æ–∫–µ–Ω—ã –∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ª—é–±–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É.
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑ `os.environ["SECRET_KEY"]` –∏–ª–∏ `.env` —Ñ–∞–π–ª–∞. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `openssl rand -hex 32`.

#### 2. –î–ï–§–û–õ–¢–ù–´–ô ADMIN –ü–ê–†–û–õ–¨
```python
# init_db.py:43
admin_email = "admin"
admin_pass = "admin"
```
**–†–∏—Å–∫:** –ï—Å–ª–∏ –∑–∞–±—ã—Ç—å —Å–º–µ–Ω–∏—Ç—å ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ.
**–†–µ—à–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –ø–∞—Ä–æ–ª—å –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –≤—ã–≤–æ–¥–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å –æ–¥–∏–Ω —Ä–∞–∑.

#### 3. PLAINTEXT FALLBACK –í –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò
```python
# services/auth_service.py:25-26
if user.hashed_password == password:  # ‚Üê plaintext comparison!
    is_valid = True
```
**–†–∏—Å–∫:** –ï—Å–ª–∏ –≤ –ë–î –µ—â—ë –µ—Å—Ç—å –Ω–µ—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏, –æ–Ω–∏ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é. –ê—Ç–∞–∫—É—é—â–∏–π —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –ë–î –≤–∏–¥–∏—Ç –ø–∞—Ä–æ–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ.
**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å fallback, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –≤ bcrypt.

#### 4. –ù–ï–¢ RATE LIMITING
**–†–∏—Å–∫:** Brute-force –∞—Ç–∞–∫–∏ –Ω–∞ `/api/auth/login` –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `slowapi` –∏–ª–∏ –∑–∞–º–µ—Ä—è—Ç—å –∫–æ–ª-–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ per IP.

#### 5. CORS POLICY ‚Äî –°–õ–ò–®–ö–û–ú –û–¢–ö–†–´–¢–ê–Ø
```python
# main.py:37-41
allow_origins=["http://localhost:5173", "http://127.0.0.1:5173", ...]
allow_methods=["*"]
allow_headers=["*"]
```
**–†–∏—Å–∫:** –í production –Ω—É–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞.

### ‚ö†Ô∏è –°–†–ï–î–ù–ò–ï –£–Ø–ó–í–ò–ú–û–°–¢–ò:

#### 6. JWT –±–µ–∑ Refresh Token
- –û–¥–∏–Ω —Ç–æ–∫–µ–Ω –Ω–∞ 24 —á–∞—Å–∞. –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ—Ç–∑—ã–≤–∞.
- –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞ ‚Äî –¥–æ—Å—Ç—É–ø –Ω–∞ —Å—É—Ç–∫–∏ –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –µ–≥–æ –æ—Ç–æ–∑–≤–∞—Ç—å.
- **–†–µ—à–µ–Ω–∏–µ:** Access Token (15 –º–∏–Ω) + Refresh Token + blacklist.

#### 7. –ù–µ—Ç Input Sanitization
- Email –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è (`admin_email = "admin"` ‚Äî —ç—Ç–æ –Ω–µ email).
- –ü–∞—Ä–æ–ª—å ‚â• 8 —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ, –Ω–µ –Ω–∞ –±—ç–∫–µ.
- SQL Injection: SQLAlchemy ORM –∑–∞—â–∏—â–∞–µ—Ç, –Ω–æ –µ—Å—Ç—å raw queries –≤ analytics.

#### 8. –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ Permission Checks
```python
# routers/market.py:62 ‚Äî –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞!
# raise HTTPException(403, "Permission 'view_market' required")
```
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (`delete_market_entry`, `get_market_entries`) –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∞.

#### 9. –ù–µ—Ç HTTPS
Uvicorn –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ SSL. –í production –Ω—É–∂–µ–Ω reverse proxy (Nginx) —Å TLS.

---

## 3. üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï (6/10)

### –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:
| –°–∏—Å—Ç–µ–º–∞ | –¢–µ—Å—Ç–æ–≤ | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|---------|--------|----------|
| Auth (login, /me, password) | 7 | ‚úÖ –•–æ—Ä–æ—à–æ |
| Salary Calculation | 11 | ‚úÖ –•–æ—Ä–æ—à–æ |
| Salary Config API | 4 | ‚úÖ –ë–∞–∑–æ–≤–æ |
| Structure CRUD | 7 | ‚úÖ –•–æ—Ä–æ—à–æ |
| Employees | 3 | üü° –ë–∞–∑–æ–≤–æ |
| Planning | 5 | ‚úÖ –•–æ—Ä–æ—à–æ |
| Scenarios | 10 | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| Roles | 2 | üü° –ú–∏–Ω–∏–º—É–º |
| Notifications | 2 | ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª |
| Admin | 2 | üü° –ë–∞–∑–æ–≤–æ |
| **Analytics** | 0 | üî¥ **–ù–µ—Ç** |
| **Requests/Workflow** | 0 | üî¥ **–ù–µ—Ç** |
| **Market** | 0 | üî¥ **–ù–µ—Ç** |
| **Users CRUD** | 0 | üî¥ **–ù–µ—Ç** |
| **Frontend** | 0 | üî¥ **–ù–µ—Ç** |

### –ß—Ç–æ –Ω—É–∂–Ω–æ:
- –¢–µ—Å—Ç—ã –¥–ª—è `analytics.py` (658 —Å—Ç—Ä–æ–∫ ‚Äî —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π —Ä–æ—É—Ç–µ—Ä –±–µ–∑ –ø–æ–∫—Ä—ã—Ç–∏—è!)
- –¢–µ—Å—Ç—ã –¥–ª—è `requests.py` (545 —Å—Ç—Ä–æ–∫ ‚Äî 2-–π –ø–æ —Ä–∞–∑–º–µ—Ä—É)
- E2E —Ç–µ—Å—Ç—ã (Playwright/Cypress) –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö user flows
- –¢–µ—Å—Ç—ã –¥–ª—è edge cases: concurrent writes, scope filtering, audit logging

---

## 4. üìà –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ (6/10)

### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ:
- ‚úÖ In-memory –∫—ç—à –≤ `analytics.py` (5 –º–∏–Ω TTL)
- ‚úÖ `joinedload` –¥–ª—è N+1 –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≤ employees, users
- ‚úÖ Batch fetch financials –≤ Excel export
- ‚úÖ React Query –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ —Å 5 –º–∏–Ω `staleTime`
- ‚úÖ `react-window` –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤

### –ü—Ä–æ–±–ª–µ–º—ã:

#### üî¥ –°–µ—Ä—å—ë–∑–Ω—ã–µ:
- **SQLite** ‚Äî –æ–¥–∏–Ω writer, –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å—é –ë–î –ø—Ä–∏ –∑–∞–ø–∏—Å–∏. –ù–µ –≤—ã–¥–µ—Ä–∂–∏—Ç >5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **N+1 –≤ scenarios** ‚Äî `compare_scenario.calc_detailed()` –¥–µ–ª–∞–µ—Ç `db.query(PlanningPosition).filter(...).all()` –∏ –ø–æ—Ç–æ–º –ø—Ä–æ—Ö–æ–¥–∏—Ç loop —Å `calculate_taxes` –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏.
- **–ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏** –≤ `GET /api/employees`, `GET /api/planning` ‚Äî –ø—Ä–∏ 10000+ –∑–∞–ø–∏—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≤–∏—Å–Ω–µ—Ç.

#### ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–µ:
- –ö—ç—à analytics ‚Äî in-memory dict, —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ. –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å multiple workers.
- Excel export –≥—Ä—É–∑–∏—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤ RAM.
- `recalculate_database` (background task) ‚Äî –∏—Ç–µ—Ä–∏—Ä—É–µ—Ç –í–°–ï –∑–∞–ø–∏—Å–∏. –ü—Ä–∏ 10000 –ø–æ–∑–∏—Ü–∏–π = 10000 * binary search = –º–µ–¥–ª–µ–Ω–Ω–æ.

---

## 5. üíª –ö–ê–ß–ï–°–¢–í–û –ö–û–î–ê (6/10)

### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ:
- ‚úÖ TypeScript –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ Pydantic –Ω–∞ –±—ç–∫–µ ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ö—É–∫–∏ (`useEmployees`, `usePlanning`, etc.)

### –ü—Ä–æ–±–ª–µ–º—ã:

#### Code Smells:
```python
# Bare except ‚Äî –ø—Ä–æ–≥–ª–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –æ—à–∏–±–∫–∏
except: pass  # 4 –º–µ—Å—Ç–∞ –≤ –∫–æ–¥–µ!
```

```python
# Deprecated API
db.query(Scenario).get(id)  # Legacy SQLAlchemy 1.x
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ: db.get(Scenario, id)
```

```python
# –ü—É—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
except Exception:
    if user.hashed_password == password:  # Fallback –Ω–∞ plaintext
```

#### –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- `schemas.py` ‚Äî 277 —Å—Ç—Ä–æ–∫, –≤—Å–µ –º–æ–¥–µ–ª–∏ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–æ—É—Ç–µ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å–≤–æ–∏ Pydantic –º–æ–¥–µ–ª–∏ –≤–Ω—É—Ç—Ä–∏ (scenarios, planning, salary_config)
- –ú–∏–∫—Å–æ–≤–∞–Ω–∏–µ `int | None` (Python 3.10+) –∏ `Optional[int]` (—Å—Ç–∞—Ä—ã–π —Å—Ç–∏–ª—å)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `verify_password` / `get_password_hash` –≤ 3 —Ñ–∞–π–ª–∞—Ö
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π `# 2024` –≤ docstrings –¥–ª—è –Ω–∞–ª–æ–≥–æ–≤ –≤ –∫–æ–¥–µ, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–º –Ω–∞ 2026

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥:
- `dependencies.py:113-139` ‚Äî –°–ª–æ–∂–Ω–∞—è scope-–ª–æ–≥–∏–∫–∞ —Å 60 —Å—Ç—Ä–æ–∫–∞–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤-—Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π (–ø—Ä–∏–∑–Ω–∞–∫ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
- `optimize_db.py`, `migrate_scenarios.py` ‚Äî –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ –∫–æ—Ä–Ω–µ, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `scripts/`

---

## 6. üöÄ ROADMAP –î–û PRODUCTION

### üî¥ –§–∞–∑–∞ 1: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (1-2 –¥–Ω—è) ‚Äî –ë–õ–û–ö–ï–† –î–ï–ü–õ–û–Ø
1. [ ] `SECRET_KEY` ‚Üí —á–∏—Ç–∞—Ç—å –∏–∑ `.env` / `os.environ`
2. [ ] –£–¥–∞–ª–∏—Ç—å plaintext fallback –≤ `AuthService.login`
3. [ ] –°–º–µ–Ω–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å admin (–∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å)
4. [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting –Ω–∞ `/api/auth/login`
5. [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è email —Ñ–æ—Ä–º–∞—Ç–∞ –Ω–∞ –±—ç–∫–µ
6. [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã –ø–∞—Ä–æ–ª—è –Ω–∞ –±—ç–∫–µ
7. [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –ø–æ–¥ production –¥–æ–º–µ–Ω

### üü† –§–∞–∑–∞ 2: –ë–î –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (3-5 –¥–Ω–µ–π)
1. [ ] –ú–∏–≥—Ä–∞—Ü–∏—è SQLite ‚Üí PostgreSQL
2. [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
3. [ ] –î–æ–±–∞–≤–∏—Ç—å `.env` —Ñ–∞–π–ª –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. [ ] Docker / Docker Compose
5. [ ] Nginx reverse proxy + HTTPS (Let's Encrypt)
6. [ ] CI/CD –ø–∞–π–ø–ª–∞–π–Ω (GitHub Actions ‚Äî —É–∂–µ –µ—Å—Ç—å `.github/` –ø–∞–ø–∫–∞)

### üü° –§–∞–∑–∞ 3: –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (1 –Ω–µ–¥–µ–ª—è)
1. [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Python `logging` ‚Üí —Ñ–∞–π–ª/stdout)
2. [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ (Sentry)
3. [ ] Refresh Token + Token blacklist
4. [ ] –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö LIST —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
5. [ ] –¢–µ—Å—Ç—ã –¥–ª—è analytics, requests, market, workflow
6. [ ] E2E —Ç–µ—Å—Ç—ã (Playwright)

### üü¢ –§–∞–∑–∞ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1 –Ω–µ–¥–µ–ª—è)
1. [ ] Redis –∫—ç—à (–≤–º–µ—Å—Ç–æ in-memory dict)
2. [ ] Connection pooling –¥–ª—è PostgreSQL
3. [ ] Background jobs —á–µ—Ä–µ–∑ Celery/ARQ
4. [ ] Streaming Excel export –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
5. [ ] Frontend bundle optimization (code splitting)

---

## 7. üìã –ò–ù–í–ï–ù–¢–ê–†–¨ API –≠–ù–î–ü–û–ò–ù–¢–û–í

| –†–æ—É—Ç–µ—Ä | Prefix | –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã | Auth | –¢–µ—Å—Ç—ã |
|--------|--------|-----------|------|-------|
| auth | `/api/auth` | 6 (login, /me, change-pass, notifications √ó3) | ‚úÖ | ‚úÖ |
| roles | `/api/roles` | 4 (CRUD) | Admin | ‚úÖ |
| users | `/api/users` | 4 (CRUD) | Admin | üî¥ |
| structure | `/api/structure` | 7 (tree, flat, CRUD √ó4, delete) | Perm | ‚úÖ |
| employees | `/api/employees` | 2 (list, export) | ‚úÖ | ‚úÖ |
| planning | `/api/planning` | 5 (list, create, update, delete, export) | ‚úÖ | ‚úÖ |
| scenarios | `/api/scenarios` | 6 (list, create, delete, compare, mass-update, commit) | ‚úÖ | ‚úÖ |
| requests | `/api/requests` | 5 (create, list, update, delete, analytics) | ‚úÖ | üî¥ |
| workflow | `/api/workflow` | 4 (steps CRUD) | Admin | üî¥ |
| market | `/api/market` | 5 (CRUD + entries) | Perm | üî¥ |
| analytics | `/api/analytics` | 7 (summary, branch, top, costs, retention, ESG, cache) | ‚úÖ | üî¥ |
| salary_config | `/api/salary-config` | 4 (get, update, history, calculate) | ‚úÖ | ‚úÖ |
| admin | `/api/admin` | 1 (stats) | Admin | ‚úÖ |
| positions | `/api/positions` | 3 (list, create, delete) | Perm | üî¥ |

**–ò—Ç–æ–≥–æ: ~63 API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞**

---

## 8. üìê –ú–û–î–ï–õ–ò –î–ê–ù–ù–´–•

| –ú–æ–¥–µ–ª—å | –¢–∞–±–ª–∏—Ü–∞ | –ü–æ–ª–µ–π | Relationships |
|--------|---------|-------|---------------|
| User | users | 7 | Role |
| Role | roles | 3 | Users[] |
| OrganizationUnit | organization_units | 6 | Parent, Children, Head |
| Position | positions | 3 | ‚Äî |
| Employee | employees | 10 | Position, OrgUnit, FinancialRecords[] |
| FinancialRecord | financial_records | 16 | Employee |
| AuditLog | audit_logs | 7 | User |
| Scenario | scenarios | 5 | PlanningPositions[] |
| PlanningPosition | planning_lines | 14 | Scenario |
| SalaryRequest | salary_requests | 14 | Employee, Requester, History[] |
| ApprovalStep | approval_steps | 8 | Role, User |
| RequestHistory | request_history | 7 | Request, Actor, Step |
| Notification | notifications | 5 | User |
| MarketData | market_data | 7 | Branch, Entries[] |
| MarketEntry | market_entries | 5 | MarketData |
| SalaryConfiguration | salary_config_2026 | 15 | ‚Äî |

**–ò—Ç–æ–≥–æ: 16 –º–æ–¥–µ–ª–µ–π**

---

## 9. üì¶ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

### Backend (Python 3.11):
| –ü–∞–∫–µ—Ç | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –†–∏—Å–∫ |
|-------|--------|------------|------|
| fastapi | latest | Web framework | ‚úÖ |
| uvicorn | latest | ASGI server | ‚úÖ |
| sqlalchemy | latest | ORM | ‚ö†Ô∏è Legacy API warnings |
| pydantic | latest | Validation | ‚ö†Ô∏è V1 deprecations |
| python-jose | latest | JWT | ‚úÖ |
| passlib+bcrypt | <4.0.0 | Password hashing | ‚ö†Ô∏è Pinned old bcrypt |
| openpyxl | latest | Excel export | ‚úÖ |

### Frontend (Node.js):
| –ü–∞–∫–µ—Ç | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|--------|------------|
| react | 18.2.0 | UI framework |
| react-router-dom | 7.13.0 | Routing |
| @tanstack/react-query | 5.90.20 | Data fetching |
| @tanstack/react-table | 8.10.7 | Tables |
| tailwindcss | 3.3.5 | Styling |
| chart.js + recharts | latest | Charts |
| lucide-react | 0.294.0 | Icons |
| reactflow | 11.11.4 | Org chart |
| sonner | 2.0.7 | Toasts |
| fuse.js | 7.1.0 | Fuzzy search |
| dagre | 0.8.5 | Graph layout |

---

## 10. üéØ –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê ‚Äî –ö–õ–Æ–ß–ï–í–´–ï –†–ò–°–ö–ò

### –†–∞—Å—á—ë—Ç –Ω–∞–ª–æ–≥–æ–≤:
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –Ω–∞–ª–æ–≥–∏ –†–ö: –û–ü–í, –í–û–°–ú–°, –ò–ü–ù, –û–°–ú–°, –°–û, –°–ù, –û–ü–í–†
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: `salary_service.py` (float) vs `salary_config.py` (Decimal) ‚Äî —Ä–∞–∑–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å!
- **–†–∏—Å–∫**: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–æ–≤ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –Ω–∞ 1-2 —Ç–≥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–π –º–æ–¥—É–ª—å –≤—ã–∑–≤–∞–Ω.
- **–†–µ—à–µ–Ω–∏–µ**: –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ Decimal-–≤–µ—Ä—Å–∏—é –≤ `salary_config.py`, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤–µ–∑–¥–µ.

### –°—Ü–µ–Ω–∞—Ä–∏–∏ (Sandbox):
- Commit —Å—Ü–µ–Ω–∞—Ä–∏—è —Å–æ–∑–¥–∞—ë—Ç backup + —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
- **–†–∏—Å–∫**: –ù–µ—Ç rollback –º–µ—Ö–∞–Ω–∏–∑–º–∞. –ï—Å–ª–∏ commit —É–ø–∞–¥—ë—Ç –ø–æ—Å—Ä–µ–¥–∏ ‚Äî –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –≤ inconsistent —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
- **–†–µ—à–µ–Ω–∏–µ**: –û–±–µ—Ä–Ω—É—Ç—å –≤ –µ–¥–∏–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é `db.begin()`.

### Workflow (–ó–∞—è–≤–∫–∏):
- Multi-step approval —Å role-based –∏ user-based —à–∞–≥–∞–º–∏
- **–†–∏—Å–∫**: –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ–¥–æ–±—Ä–µ–Ω–∏–π –æ–¥–Ω–æ–≥–æ —à–∞–≥–∞ –¥–≤—É–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

---

## –ò–¢–û–ì

### –ß—Ç–æ –ø—Ä–µ–∫—Ç –¥–µ–ª–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:
1. ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è ERP-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –§–û–¢ –∑–∞ ~15K —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
2. ‚úÖ 14 –º–æ–¥—É–ª–µ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
3. ‚úÖ Role-based + Scope-based access control
4. ‚úÖ Sandbox/—Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –±—é–¥–∂–µ—Ç–∞
5. ‚úÖ Time Travel (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–Ω–∏–º–∫–∏)
6. ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI (React + TailwindCSS)
7. ‚úÖ 53 —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Ç–µ—Å—Ç–∞

### –ß—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç production:
1. üî¥ Hardcoded —Å–µ–∫—Ä–µ—Ç—ã
2. üî¥ Plaintext –ø–∞—Ä–æ–ª—å fallback
3. üî¥ SQLite (–Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è)
4. üî¥ –ù–µ—Ç rate limiting
5. üî¥ –ù–µ—Ç HTTPS / –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ CORS
6. üî¥ –ù–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
7. üî¥ –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è / –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ 
8. üî¥ –ù–µ—Ç CI/CD

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –§–∞–∑—É 1 (–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å) –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –∑–∞ 1-2 –¥–Ω—è. –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —Å –¥–∞–Ω–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω—É–∂–Ω—ã –§–∞–∑—ã 1+2 (~1 –Ω–µ–¥–µ–ª—è).
